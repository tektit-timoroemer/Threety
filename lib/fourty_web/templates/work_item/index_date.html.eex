<h1><%= @heading %></h1>
<div class="row row-cols-auto">
  <div class="col-sm-11 p-3 border bg-light">
    <%= if @adm_only do %>
      <%= my_icon_action("calendar-minus-fill", Routes.work_item_user_path(@conn, :index_date, @user_id, to_string( Date.add(@date_as_of,-1))))%>
      <%= my_action("work_items", "new", Routes.work_item_user_path(@conn, :new, @user_id, to_string(@date_as_of))) %>
      <%= my_icon_action("calendar-plus-fill", Routes.work_item_user_path(@conn, :index_date, @user_id, Date.add(@date_as_of, 1) |> to_string()))%>
    <% else %>
      <%= my_icon_action("calendar-minus-fill", Routes.work_item_path(@conn, :index_date, to_string(Date.add(@date_as_of,-1))))%>
      <%= my_action("work_items", "new", Routes.work_item_path(@conn, :new, to_string(@date_as_of))) %>
      <%= my_icon_action("calendar-plus-fill", Routes.work_item_path(@conn, :index_date, to_string(Date.add(@date_as_of, 1))))%>
    <% end %>
  <div class="table-responsive">
    <table class="table table-hover">
      <thead>
        <tr>
          <th class="col-sm-2"><%= dgettext("work_items", "date_time") %></th>
          <th class="col-sm-1 text-end"><%= dgettext("work_items", "duration") %></th>
          <th class="col-sm-1 text-end"><%= dgettext("work_items", "time_from") %></th>
          <th class="col-sm-1 text-end"><%= dgettext("work_items", "time_to") %></th>
          <th class="col-sm-3"><%= dgettext("work_items", "comments") %></th>
          <th class="col-sm-3"><%= dgettext("global", "actions") %></th>
        </tr>
      </thead>
      <tbody>
      <%= for work_item <- @work_items do %>
        <tr>
          <td><%= my_date_time(work_item.inserted_at) %></td>
          <td class="text-end"><%= min2dur(work_item.duration) %></td>
          <td class="text-end"><%= min2dur(work_item.time_from) %></td>
          <td class="text-end"><%= min2dur(work_item.time_to) %></td>
          <td><%= work_item.comments %></td>
          <td>
            <%= if @adm_only do %>
              <%= my_action_link("global", "show", Routes.work_item_user_path(@conn, :show, @user_id, work_item)) %>
              <%= my_action_link("global", "edit", Routes.work_item_user_path(@conn, :edit, @user_id, work_item)) %>
              <%= my_action_link("global", "delete", Routes.work_item_user_path(@conn, :delete, @user_id, work_item)) %>
            <% else %>
              <img src="/assets/static/icons/caret-down-square.svg" alt="move down" width="32" height="32" />
              <%= my_action_link("global", "show", Routes.work_item_path(@conn, :show, work_item)) %>
              <%= my_action_link("global", "edit", Routes.work_item_path(@conn, :edit, work_item)) %>
              <%= my_action_link("global", "delete", Routes.work_item_path(@conn, :delete, work_item)) %>
            <% end %>            
          </td>
        </tr>
      <% end %>
      </tbody>
    </table>
  </div>
</div>
